<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Essential for mobile responsiveness -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OPAG Rice Section - Activities</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <script src="../scripts/platformStylesforactivities.js"></script>
   <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/css/lightbox.min.css">
<style>
.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
  padding: 10px;
}
.gallery figure {
  margin: 0;
  text-align: center;
}
.gallery img {
  width: 100%;
  height: auto;
  border-radius: 6px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
#loadMoreBtn {
  display: block;
  margin: 20px auto;
  padding: 10px 24px;
  background: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}
#loadMoreBtn:hover {
  background: #0056b3;
}
  .gallery-album {
  margin-bottom: 40px;
}
.gallery-album h3 {
  margin-top: 30px;
  padding-bottom: 8px;
  border-bottom: 2px solid #007bff;
  color: #007bff;
  font-size: 1.4em;
}
.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 16px;
  margin-top: 16px;
}
.gallery figure {
  margin: 0;
  text-align: center;
}
.gallery img {
  width: 100%;
  height: auto;
  border-radius: 6px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
</style>
</head>

<body>
<!-- Login Form Modal -->
<div id="loginModal" class="modal">
  <div class="modal-content">
    <span class="close-button" id="closeModalBtn">&times;</span>
    <h2>Login</h2>
    <form id="logForm">
      <input type="text" id="login-email" placeholder="Username or Email" required />
      <div class="password-wrapper">
        <input type="password" id="login-password" placeholder="Password" required />
        <i class="uil uil-eye-slash toggle-password" id="togglePassword"></i>
      </div>
      <button type="submit">Login</button>
    </form>
  </div>
</div>

<!-- Toast Notification -->
<div id="toast" class="toast-notification"></div>

<header>
  <nav class="top-nav">
    <div id="login-area">
      <button class="button" id="loginButton">Login</button>
    </div>
  </nav>
  <ul class="opagheader">
    <li><img src="../logo-pic/logo opag.png" alt="OPAG Logo" class="opag-logo"></li>
    <li>OPAG Rice Section</li>
  </ul>
  
</header>
<nav class="navigatio">
  <div class="navigations">
      <a href="#" id="toggleSidebarBtn" class="auth-only hamburger-menu" style="display: none;">
          <span class="hamburger-line line1"></span>
          <span class="hamburger-line line2"></span>
          <span class="hamburger-line line3"></span>
          
      </a>
      <a href="../index.html">Home</a>
      <a href="activities.html" class="active">Activities</a>
      <a href="rice-production-status.html">Rice Production Status</a>
      <a href="news.html">News & Updates</a>
        <div class="dropdown">
            <a  class="dropdown-toggle">PRTF 2025 ▾</a>
            <div class="dropdown-content">
              <a href="pages/prtf/pages/about-prtf.html">About PRTF</a>
              <a href="pages/prtf/pages/prtfguidelines.html">PRTF Guidelines</a>
            <a href="https://docs.google.com/forms/u/0/d/e/1FAIpQLSeLW3jbHL6XjGD23p-TWeadcSPgUt2dBhChWMIe9Ndu08vV9A/formResponse" target="_blank">Join PRTF</a>
              <a href="pages/prtf  pages/prtf_participants.html">List of Participants</a>
            </div>
          </div>  
          
  </div>
</nav>
  <div class="main-layout">
  <!-- Sidebar -->
  <div id="sidebar" class="sidebar hide">
    <a href="#" class="nav_logo" id="sidebar-user-info">
      <!-- Filled by session.js -->
    </a>

    <a href="dashboard.php" class="uil uil-house-user"><strong class="n">Home</strong></a>
    <a href="cart.php" class="uil uil-analytics">MPOR</a>
    <a href="rental.php" class="uil uil-document-layout-left">IPCR</a>
    <a href="order.php" class="uil uil-heart-alt">Monthly Report</a>
    <a href="cart.php" class="uil uil-plane">Travel Order</a>
    <a href="orderhistory.php" class="uil uil-history">Profile</a>
    <a href="settings.php" class="uil uil-cog">Settings</a>
    <button type="button" id="sidebarLogoutBtn" class="logout-btna">Logout</button>
  </div>
    <main class="maincontentnews1"> <!-- Main content area -->
      <section class="news1content1"> <!-- Content section -->

        <!-- Activity Slideshow Section -->
        <section id="activity-slideshow" class="gallery-section">
          <h2>Activity Slideshow</h2>
          <div class="video-container">
            <!-- Embed your Google Slides presentation -->
            <iframe
              src="https://docs.google.com/presentation/d/e/2PACX-1vS85DwPye73HFB-J45wu9yn-iskv6PdeZ7pWClBssuhcPC1iuYYlAdtGk1BvimG6choH14yn5Y7PDZz/pubembed?start=true&loop=true&delayms=5000"
              title="OPAG Activities Slideshow"
              allowfullscreen
              mozallowfullscreen
              webkitallowfullscreen>
            </iframe>
          </div>
        </section>

     <!-- Activity Photo Gallery Section -->
<section id="activity-gallery" class="gallery-section">
  <h2>Activity Photo Gallery</h2>

 <!-- Replace the hardcoded gallery with this -->
<div class="gallery" id="dynamic-gallery">
  <!-- Images will be inserted here -->
</div>
<button id="loadMoreBtn" style="display:none; margin:20px auto; padding:10px 20px;">Load More</button>
</section>
    </main>
  </div>

    <footer>
  <p>&copy; <span id="current-year"></span> OPAG Rice Section | All rights reserved.</p>
</footer>

<!-- Loading Spinner -->
<div id="login-loading-spinner">
  <div class="spinner" style="width:40px; height:40px; border:4px solid #ccc; border-top:4px solid #007bff; border-radius:50%; animation: spin 1s linear infinite;"></div>
  <p style="margin-top:10px; font-weight:bold; color:#007bff;">Logging in...</p>
</div>

<script src="../scripts/login.js"></script>
<script src="../scripts/logout.js"></script>
<script src="../scripts/openmenu.js"></script>
<script src="../scripts/user_dashboard.js"></script>
<script src="../scripts/session.js"></script>
<script>
async function loadGalleryFromManifest() {
  try {
    const response = await fetch('../gallery/gallery-manifest.json');
    if (!response.ok) throw new Error('Failed to load gallery manifest');

    const sections = await response.json();
    const container = document.getElementById('gallery-container');

    if (!container) {
      console.error('Gallery container not found!');
      return;
    }

    container.innerHTML = ''; // Clear old content

    sections.forEach(section => {
      // Create album section
      const sectionDiv = document.createElement('div');
      sectionDiv.className = 'gallery-album';
      sectionDiv.innerHTML = `
        <h3>${section.title}</h3>
        <div class="gallery" id="gallery-${section.folder}"></div>
      `;
      container.appendChild(sectionDiv);

      // Get the .gallery div inside this section
      const galleryDiv = sectionDiv.querySelector('.gallery');

      // Add images
      section.images.forEach(filename => {
        const caption = filename
          .replace(/\.[^/.]+$/, "")
          .replace(/[-_]/g, " ")
          .replace(/\b\w/g, l => l.toUpperCase());

        const figure = document.createElement('figure');
        figure.innerHTML = `
          <a href="../gallery/${section.folder}/${encodeURIComponent(filename)}" 
             data-lightbox="album-${section.folder}" 
             data-title="${caption.replace(/"/g, '&quot;')}">
            <img src="../gallery/${section.folder}/${encodeURIComponent(filename)}" 
                 alt="${caption}" 
                 loading="lazy">
          </a>
          <figcaption>${caption}</figcaption>
        `;
        galleryDiv.appendChild(figure);
      });
    });

  } catch (error) {
    console.error('Gallery load error:', error);
    const container = document.getElementById('gallery-container');
    if (container) {
      container.innerHTML = `
        <p style="color:red; text-align:center; padding:20px;">
          ⚠️ Failed to load photo gallery.<br>
          ${error.message}
        </p>
      `;
    }
  }
}

document.addEventListener('DOMContentLoaded', loadGalleryFromManifest);
</script>
<script>
  // Set current year
  document.getElementById('current-year').textContent = new Date().getFullYear();
  
  // Close modal functionality
  document.getElementById('closeModalBtn').addEventListener('click', function() {
    document.getElementById('loginModal').style.display = 'none';
  });
  
  // Toggle password visibility
  document.getElementById('togglePassword').addEventListener('click', function() {
    const passwordInput = document.getElementById('login-password');
    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordInput.setAttribute('type', type);
    this.classList.toggle('uil-eye');
    this.classList.toggle('uil-eye-slash');
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/js/lightbox.min.js"></script>
</body>
</html>
